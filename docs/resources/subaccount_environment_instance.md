---
page_title: "btp_subaccount_environment_instance Resource - terraform-provider-btp"
subcategory: ""
description: |-
  Creates an environment instance, such as a Cloud Foundry org, in a subaccount.
  Tips:
  * You must be assigned to the subaccount admin role.
  * Quota-based environments, such as Kyma, must first be assigned as entitlements to the subaccount.
  Further documentation:
  * Cloud Foundry: https://help.sap.com/docs/btp/sap-business-technology-platform/org-management-using-sap-btp-command-line-interface-btp-cli
  * Kyma: https://help.sap.com/docs/btp/sap-business-technology-platform/available-plans-in-kyma-environment
  * Concept: https://help.sap.com/docs/btp/sap-business-technology-platform/environments
---

# btp_subaccount_environment_instance (Resource)

Creates an environment instance, such as a Cloud Foundry org, in a subaccount.

__Tips:__
* You must be assigned to the subaccount admin role.
* Quota-based environments, such as Kyma, must first be assigned as entitlements to the subaccount.

__Further documentation:__
* Cloud Foundry: <https://help.sap.com/docs/btp/sap-business-technology-platform/org-management-using-sap-btp-command-line-interface-btp-cli>
* Kyma: <https://help.sap.com/docs/btp/sap-business-technology-platform/available-plans-in-kyma-environment>
* Concept: <https://help.sap.com/docs/btp/sap-business-technology-platform/environments>

## Example Usage

```terraform
# creates a cloud foundry environment in a given account
resource "btp_subaccount_environment_instance" "cloudfoundry" {
  subaccount_id    = "6aa64c2f-38c1-49a9-b2e8-cf9fea769b7f"
  name             = "my-cf-environment"
  environment_type = "cloudfoundry"
  service_name     = "cloudfoundry"
  plan_name        = "standard"
  # ATTENTION: some regions offer multiple environments of a kind and you must explicitly select the target environment in which
  # the instance shall be created using the parameter landscape label. 
  # available environments can be looked up using the btp_subaccount_environments datasource
  parameters = jsonencode({
    instance_name = "my-cf-org-name"
  })
}


# creates a cloud foundry environment in a given account
# in additon add a custom timeout for the create and delete operation
resource "btp_subaccount_environment_instance" "cloudfoundry" {
  subaccount_id    = "6aa64c2f-38c1-49a9-b2e8-cf9fea769b7f"
  name             = "my-cf-environment"
  environment_type = "cloudfoundry"
  service_name     = "cloudfoundry"
  plan_name        = "standard"
  # ATTENTION: some regions offer multiple environments of a kind and you must explicitly select the target environment in which
  # the instance shall be created using the parameter landscape label. 
  # available environments can be looked up using the btp_subaccount_environments datasource
  parameters = jsonencode({
    instance_name = "my-cf-org-name"
  })
  timeouts = {
    create = "1h"
    update = "35m"
    delete = "30m"
  }
}


# creates a cloud foundry environment in a given account
# and the dedicted target landscape cf-us10
resource "btp_subaccount_environment_instance" "cloudfoundry" {
  subaccount_id    = "6aa64c2f-38c1-49a9-b2e8-cf9fea769b7f"
  name             = "my-cf-environment"
  environment_type = "cloudfoundry"
  service_name     = "cloudfoundry"
  landscape_label  = "cf-us10"
  plan_name        = "standard"
  parameters = jsonencode({
    instance_name = "my-cf-org-name"
  })
}


# creates a kyma environment in a given account
# NOTE: for the available parameter values, check https://help.sap.com/docs/btp/sap-business-technology-platform/available-plans-in-kyma-environment
resource "btp_subaccount_environment_instance" "kyma" {
  subaccount_id    = "6aa64c2f-38c1-49a9-b2e8-cf9fea769b7f"
  name             = "my-kyma-environment"
  environment_type = "kyma"
  service_name     = "kymaruntime"
  plan_name        = "aws"

  parameters = jsonencode({
    name          = "my-kyma-environment"
    region        = "us-east-1"
    machineType   = "mx5.xlarge" #smallest option
    autoScalerMin = 3
    autoScalerMax = 20
  })
  timeouts = {
    create = "1h"
    update = "35m"
    delete = "1h"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `environment_type` (String) The type of the environment instance that is used.
- `name` (String) The name of the environment instance.
- `parameters` (String) The configuration parameters for the environment instance.
- `plan_name` (String) The name of the service plan for the environment instance in the corresponding service broker's catalog.
- `service_name` (String) The name of the service for the environment instance in the corresponding service broker's catalog.
- `subaccount_id` (String) The ID of the subaccount.

### Optional

- `landscape_label` (String) The name of the landscape within the logged in region on which the environment instance is created.
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))

### Read-Only

- `broker_id` (String) The ID of the associated environment broker.
- `created_date` (String) The date and time when the resource was created in [RFC3339](https://www.ietf.org/rfc/rfc3339.txt) format.
- `custom_labels` (Map of Set of String) The set of words or phrases assigned to the environment instance.
- `dashboard_url` (String) The URL of the service dashboard, which is a web-based management user interface for the service instances.
- `description` (String) The description of the environment instance.
- `id` (String) The ID of the environment instance.
- `labels` (String) The Broker-specified key-value pairs that specify attributes of an environment instance.
- `last_modified` (String) The date and time when the resource was last modified in [RFC3339](https://www.ietf.org/rfc/rfc3339.txt) format.
- `operation` (String) An identifier that represents the last operation. This ID is returned by the environment brokers.
- `plan_id` (String) The ID of the service plan for the environment instance in the corresponding service broker's catalog.
- `platform_id` (String) The ID of the platform for the environment instance in the corresponding service broker's catalog.
- `service_id` (String) The ID of the service for the environment instance in the corresponding service broker's catalog.
- `state` (String) The current state of the environment instance. Possible values are: 

  | state | description | 
  | --- | --- | 
  | `OK` | The CRUD operation or series of operations completed successfully. | 
  | `CREATING` | Creating of the environment instance is in progress. | 
  | `CREATION_FAILED` | The creation of the environment instance failed, and the environment instance was not created or was created but cannot be used. | 
  | `UPDATING` | Updating of the environment instance is in progress. | 
  | `UPDATE_FAILED` | The update of the environment instance failed, and  the environment instance was not updated. | 
  | `DELETING` | Deleting of the environment instance is in progress. | 
  | `DELETION_FAILED` | The deletion of the environment instance failed, and the environment instance was not deleted. |
- `tenant_id` (String) The ID of the tenant that owns the environment instance.
- `type` (String) The last provisioning operation on the environment instance. Possible values are: 

  | type | description | 
  | --- | --- | 
  | `Provision` | The environment instance is created. | 
  | `Update` | The environment instance is changed. | 
  | `Deprovision` | The environment instance is deleted. |

<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) Timeout for creating the environment instance.
- `delete` (String) Timeout for deleting the environment instance.
- `update` (String) Timeout for updating the environment instance.

## Import

Import is supported using the following syntax:

```terraform
# terraform import btp_subaccount_environment_instance.<resource_name> <subaccount_id>,<environment_instance_id>

terraform import btp_subaccount_environment_instance.cloudfoundry 6aa64c2f-38c1-49a9-b2e8-cf9fea769b7f,FD9BB73F-F663-4284-A50B-D72EC24FC4E1
```
